# ============================================================================
# ALGOLAB BRIDGE SERVER - ENVIRONMENT CONFIGURATION
# ============================================================================
# Bu dosya .env.example'dır. Gerçek kullanım için:
# 1. Bu dosyayı kopyalayın: cp .env.example .env
# 2. .env içindeki tüm EXAMPLE değerlerini gerçek değerlerle değiştirin
# 3. .env dosyasını asla Git'e commit etmeyin!
# ============================================================================

# ----------------------------------------------------------------------------
# ALGOLAB API AYARLARI
# ----------------------------------------------------------------------------
# Algolab/Denizbank API bağlantı bilgileri
# Bu değerler sabit, değiştirmeyin.
ALGOLAB_API_URL=https://www.algolab.com.tr/api
ALGOLAB_WS_URL=wss://www.algolab.com.tr/api/ws
ALGOLAB_HOSTNAME=www.algolab.com.tr

# ----------------------------------------------------------------------------
# GÜVENLIK AYARLARI (KRİTİK!)
# ----------------------------------------------------------------------------
# Railway Backend ile Bridge Server arasındaki güvenlik anahtarları
# ÖNEMLİ: Bu değerleri mutlaka değiştirin! Aşağıdakiler sadece ÖRNEK.

# JWT Secret Key - Railway'in Bridge'e erişimi için JWT imzalama anahtarı
# Railway backend'deki BRIDGE_JWT_SECRET ile BİREBİR AYNI olmalı!
# Üretmek için: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
BRIDGE_JWT_SECRET=9P5VDdIf4hQsG_9ZASwUGh10nXygjphpLAl2MiMJoPU

# Shared Secret Key (Opsiyonel) - JWT'ye alternatif basit güvenlik
# Railway'den gelen isteklerde X-Bridge-Secret header'ında gönderilir
# Boş bırakılırsa sadece JWT kullanılır
BRIDGE_SECRET_KEY=EXAMPLE_SHARED_SECRET_CHANGE_THIS_TO_RANDOM_STRING_def456uvw

# IP Beyaz Listesi (Opsiyonel) - Railway sunucularının IP'leri
# Virgülle ayırarak birden fazla IP ekleyebilirsiniz
# Örnek: ALLOWED_RAILWAY_IPS=1.2.3.4,5.6.7.8
# Boş bırakılırsa IP kontrolü yapılmaz
ALLOWED_RAILWAY_IPS=

# ----------------------------------------------------------------------------
# BRIDGE SERVER & BACKEND AYARLARI
# ----------------------------------------------------------------------------
# Bridge Server'ın dışarıdan erişilebilir adresi
# Railway backend bu URL'yi kullanarak bridge'e istek atar
# Local dev: http://localhost:8000
# Production: https://algolab-bridge-server-production.up.railway.app
BRIDGE_PUBLIC_URL=https://algolab-bridge-server-production.up.railway.app

# Backend Server adresi
# Bridge Server bu URL'yi kullanarak Backend'e kayıt olur ve sağlık sinyali gönderir
# Local dev: http://localhost:8001
# Production: https://trader-eidos-suite-backend-production.up.railway.app
# ⚠️ KRİTİK: Railway'de çalışırken MUTLAKA doğru Backend URL'ini ayarlayın!
BACKEND_URL=https://trader-eidos-suite-backend-production.up.railway.app

# ----------------------------------------------------------------------------
# REDIS AYARLARI
# ----------------------------------------------------------------------------
# Session yönetimi için Redis bağlantı bilgileri
# Natro sunucusunda local Redis çalışacak
REDIS_URL=redis://localhost:6379/0

# Session süresi (saniye)
# Algolab oturumları ne kadar süre saklanacak
# Varsayılan: 3600 (1 saat)
SESSION_TTL_SECONDS=3600

# ----------------------------------------------------------------------------
# RATE LIMITING
# ----------------------------------------------------------------------------
# Algolab API'ye gönderilen istekler arasındaki minimum süre (saniye)
# Algolab kuralı: Minimum 5 saniye
# Bu değeri değiştirmeyin, aksi halde HTTP 429 hatası alırsınız!
MIN_REQUEST_INTERVAL_SECONDS=5.0

# ----------------------------------------------------------------------------
# SUNUCU AYARLARI
# ----------------------------------------------------------------------------
# FastAPI sunucu bind adresi
# 0.0.0.0 = Tüm network interface'lerden erişim
HOST=0.0.0.0

# Sunucu port'u
PORT=8000

# Uvicorn worker sayısı
# CPU çekirdek sayınıza göre ayarlayın (genelde 2-4 arası)
WORKERS=4

# ----------------------------------------------------------------------------
# LOGLAMA AYARLARI
# ----------------------------------------------------------------------------
# Log seviyesi: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log formatı: json (production) veya text (development)
# JSON: Makine okunabilir, Elasticsearch/Grafana'ya uyumlu
# TEXT: İnsan okunabilir, development için
LOG_FORMAT=json

# ----------------------------------------------------------------------------
# ORTAM AYARI
# ----------------------------------------------------------------------------
# Çalışma ortamı: development, staging, production
# development: /docs ve /redoc aktif, detaylı hata mesajları
# production: /docs kapalı, sadece genel hata mesajları
ENVIRONMENT=development

# ============================================================================
# NOT: .env dosyasını oluşturduktan sonra:
# ============================================================================
# 1. BRIDGE_JWT_SECRET ve BRIDGE_SECRET_KEY'i güçlü rastgele değerlerle değiştirin
# 2. Railway backend'deki .env'e de AYNI JWT_SECRET'ı ekleyin
# 3. Production'a geçerken ENVIRONMENT=production yapın
# 4. Redis çalıştığından emin olun: sudo systemctl status redis
# 5. Güvenlik için .env dosyasının izinlerini kısıtlayın: chmod 600 .env
# ============================================================================
